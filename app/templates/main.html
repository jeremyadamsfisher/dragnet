{% extends "base.html" %}

{% block script%}
$(document).ready(function(){
    $("form#files").submit(function(e) {
        e.preventDefault();

        let formField = document.getElementById("files");
        let progress = document.getElementById("uploadProgress");
        setTimeout(function(){
            formField.style.display = "none";
            progress.style.display = "inline-block";
        }, 1000)

        let formData = new FormData(this);
        $.ajax({
            url: "{{ url_for('enqueue') }}",
            type: 'POST',
            data: formData,
            success: function (data) {
                setTimeout(function(){
                    window.location.replace(data.result_page);
                }, 5000);
            },
            cache: false,
            contentType: false,
            processData: false
        });
    });
}); 
{% endblock %}

{% block content %}
<div>

<h1>{{branding_tagline}}</h1>
tldr; input a look (ðŸ§”) and we'll give you a <i>lerk</i> (ðŸ‘¸)
<br>
<div class="fileform">
    <div id="uploadProgress" style="display:none;">
        <h2>uploading lerk...</h2>
        <div style="text-align: center; margin-bottom: 25px;">
            <div id="loader" style="display: inline-block"></div>
        </div>
    </div>
    <form id="files" method="post" enctype="multipart/form-data"  style="display:inline-block;">
        <input type="file" name="file"/>
        <button>Submit</button>
    </form>
</div>
<b>Tips:</b>
<ul>
    <li>Look directly at the camera</li>
    <li>Keep the lighting neutral and don't use any filters (e.g. black and white)</li>
</ul>
{% include 'about.html' %}
{% include 'gallery.html' %}
{% include 'footer_stuff.html' %}
</div>
<div style="height: 225px;"></div>
{% endblock %}